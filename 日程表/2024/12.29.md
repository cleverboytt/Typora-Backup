# å®‰æ’

- [ ] C++å­¦ä¹  42/94

- [ ] webserver é¡¹ç›®

  ---

  

ğŸ‘‡ã€45ã€‘C++ å¤åˆ¶ä¸æ‹·è´æ„é€ å‡½æ•°

æ‹·è´å¤åˆ¶æ˜¯éå¸¸æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå¯ä»¥è®©ç¨‹åºæŒ‰ç…§æˆ‘ä»¬æƒ³è¦çš„æ–¹å¼å·¥ä½œï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œä¸å¿…è¦çš„å¤åˆ¶æ˜¯ä¸å¥½çš„ï¼Œæˆ‘ä»¬è¦å°½é‡é¿å…è¿™ç§æƒ…å†µï¼Œå› ä¸ºä¼šæµªè´¹æ€§èƒ½ï¼Œ 

```C++
#include<iostream>
#include<string>
#include <string.h>

class String{
private:
    char* m_Buffer;
    unsigned int m_Size;
public:
    String(const char* string){
        m_Size=strlen(string);
        m_Buffer=new char[m_Size+1];
        memcpy(m_Buffer, string, m_Size+1);
    }
    ~String(){
        delete[] m_Buffer;
    }
    friend std::ostream& operator<<(std::ostream& stream, const String& string);
};
 
 std::ostream& operator<<(std::ostream& stream, const String& string){
    stream<<string.m_Buffer;
    return stream;
 }

 int main(){
    String string="Taojiachen"; 
    std::cout<<string<<std::endl;
    std::cin.get();
 }
```

 æ·±æ‹·è´ã€æµ…æ‹·è´ï¼Œæ²¡å¬æ‡‚ qaq

---

ğŸ‘‡ã€46ã€‘C++ ä¸­çš„ç®­å¤´

```C++
#include<iostream>
#include "string.h"

class Entity{
public:
    void Print() const{
        std::cout<<"Hello!"<<std::endl;
    }
};

class ScopedPtr{
private:
    Entity* m_Obj;
public:
    ScopedPtr(Entity* entity)
        :m_Obj(entity){}
    ~ScopedPtr(){
        delete m_Obj; 
    }
    Entity* operator->(){
        return m_Obj;
    }
};

int main(){
    Entity e ; 
    e.Print();
    Entity* ptr = &e;
    // Entity& entity=*ptr;
    // entity.Print();
    // (*ptr).Print() ;
    ptr->Print();

    ScopedPtr entity = new Entity();
    entity->Print();
    std::cin.get();
}
```

ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®­å¤´æ“ä½œç¬¦çš„ä¾‹å­ã€‚

å¦‚ä½•ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦ï¼Œæ¥è·å–å†…å­˜ä¸­æŸä¸ªæˆå‘˜å˜é‡çš„åç§»é‡ï¼Ÿ

```
#include<iostream>
#include "string.h"

struct Vector3{
    float x,y,z;
};

int main(){
    int offset = (int)&((Vector3*)0)->x;
    int offset2 = (int)&((Vector3*)0)->y;
    int offset3 = (int)&((Vector3*)0)->z;
    std::cout << offset << std::endl;
    std::cout << offset2 << std::endl;
    std::cout << offset3 << std::endl;
    std::cin.get();
}
```

- `(Vector3*)0` å°†æ•´æ•° `0` è½¬æ¢ä¸º [Vector3](vscode-file://vscode-app/d:/Microsoft VS Code/resources/app/out/vs/code/electron-sandbox/workbench/workbench.html) ç±»å‹çš„ç©ºæŒ‡é’ˆã€‚
- `((Vector3*)0)->x` é€šè¿‡ç©ºæŒ‡é’ˆè®¿é—® `x` æˆå‘˜ã€‚
- `&((Vector3*)0)->x` è·å– `x` æˆå‘˜çš„åœ°å€ï¼Œè¿™å®é™…ä¸Šæ˜¯è®¡ç®— `x` æˆå‘˜ç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„åç§»é‡ã€‚
- `(int)&((Vector3*)0)->x` å°†åç§»é‡è½¬æ¢ä¸ºæ•´æ•°ï¼Œå¹¶èµ‹å€¼ç»™ [offset](vscode-file://vscode-app/d:/Microsoft VS Code/resources/app/out/vs/code/electron-sandbox/workbench/workbench.html) å˜é‡ã€‚

---

ğŸ‘‡ã€47ã€‘C++ ä¸­çš„åŠ¨æ€æ•°ç»„

